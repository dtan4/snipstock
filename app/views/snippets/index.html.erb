<h1>Listing snippets</h1>

<div class="text-right">
  <%= link_to 'New Snippet', new_snippet_path, class: "btn btn-large btn-primary disabled" %>
</div>
<br />

<% @snippets.each_with_index do |snippet, i| %>
<% if i % 2 == 0 %>
<div class="row-fluid">
<% end %>
<div class="span6">
  <div class="well">
    <p><small>posted <%= distance_of_time_in_words(Time.now, snippet.created_at) %> ago</small></p>
    <h3><%= link_to snippet.title, snippet %></h3>
    <p><%= html_escape(snippet.description[0..49]) unless snippet.description.nil? %></p>
    <div class="text-right">
      <span><strong>Lang:</strong> <%= snippet.lang %></span>
      <span><strong>Tags:</strong> <%= snippet.tag_list %></span><br />
      <span><%= pluralize(snippet.comments.length, "comment") %></span>
    </div>
    <!-- TODO: lang should be chosen by combobox (select-tag) -->
    <pre class="brush: <%= snippet.lang.downcase %>"><%= snippet.code.lines[0..9].join %></pre>
    <div class="text-right">
      <span><%= link_to 'Edit', edit_snippet_path(snippet), class: "btn btn-small btn-success disabled" %></span>
      <span><%= link_to 'Destroy', snippet, method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-small btn-danger disabled" %></span>
    </div>
  </div>
</div>
<% if (i % 2 == 1) || (i == @snippets.length - 1) %>
</div>
<% end %>
<% end %>

<script src="/scripts/XRegExp.js"></script>
<script src="/scripts/shCore.js"></script>
<script src="/scripts/shAutoloader.js"></script>
<link type="text/css" rel="stylesheet" href="/styles/shCore.css"/>
<link type="text/css" rel="Stylesheet" href="/styles/shThemeDefault.css" />

<script type="text/javascript">
  SyntaxHighlighter.autoloader(
  'cpp c					/scripts/shBrushCpp.js',
  'c# c-sharp csharp		/scripts/shBrushCSharp.js',
  'css					/scripts/shBrushCss.js',
  'delphi pascal			/scripts/shBrushDelphi.js',
  'diff patch pas			/scripts/shBrushDiff.js',
  'erl erlang				/scripts/shBrushErlang.js',
  'groovy					/scripts/shBrushGroovy.js',
  'java					/scripts/shBrushJava.js',
  'js jscript javascript	/scripts/shBrushJScript.js',
  'perl pl				/scripts/shBrushPerl.js',
  'php					/scripts/shBrushPhp.js',
  'text plain				/scripts/shBrushPlain.js',
  'py python				/scripts/shBrushPython.js',
  'ruby rails ror rb		/scripts/shBrushRuby.js',
  'scala					/scripts/shBrushScala.js',
  'sql					/scripts/shBrushSql.js',
  'vb vbnet				/scripts/shBrushVb.js',
  'xml xhtml xslt html	/scripts/shBrushXml.js'
  );

  SyntaxHighlighter.all();
</script>
